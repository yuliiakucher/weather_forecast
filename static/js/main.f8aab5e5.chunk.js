(this.webpackJsonpweather_forecast=this.webpackJsonpweather_forecast||[]).push([[0],{39:function(e,t,a){e.exports={background:"HomePage_background__2eppM"}},40:function(e,t,a){e.exports={right_badge:"OneDayForecast_right_badge__FhEbM",card_body:"OneDayForecast_card_body__3MXMc"}},42:function(e,t,a){e.exports={name:"FavCity_name__2d_Ez",icon:"FavCity_icon__3UNuD"}},59:function(e,t,a){e.exports={leaflet_container:"WeatherMap_leaflet_container__MMeZe"}},63:function(e,t,a){e.exports=a(95)},68:function(e,t,a){},69:function(e,t,a){},91:function(e,t){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),l=(a(68),a(69),a(39)),i=a.n(l),u=a(25),m=a(13),s=a(6),d=a(14),p=a(40),f=a.n(p),g=function(e){var t=e.date,a=e.temp_min,n=e.temp_max,c=e.icon,o=e.details,l=new Date(t);return r.a.createElement(d.a.Body,{className:f.a.card_body},r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement(d.a.Img,{src:"http://openweathermap.org/img/wn/".concat(c,"@2x.png")})," "),r.a.createElement(s.a,null,r.a.createElement(d.a.Title,null,l.toDateString().split(" ")[0]),r.a.createElement(d.a.Subtitle,null,o)),r.a.createElement(s.a,{className:f.a.right_badge},r.a.createElement("div",null,a,"\xb0C/",n,"\xb0C"))))},E=a(17),h=a(57),_=Object(E.b)((function(e){return{three_days_forecast:e.ForecastReducer.three_days_forecast,isLoading:e.ForecastReducer.isLoading}}))((function(e){return r.a.createElement(d.a,null,r.a.createElement(d.a.Header,null,r.a.createElement(d.a.Title,null,"3 Days Forecast")),r.a.createElement(d.a.Body,null,e.isLoading?r.a.createElement(h.a,{animation:"border",role:"status"}):e.three_days_forecast.map((function(e){return r.a.createElement(g,{key:e.temp_min,date:e.date,temp_min:e.temp_min,temp_max:e.temp_max,icon:e.icon,details:e.details})}))))})),v=a(11),y=a(58),w="a8de334d1f2f9e32c071bebca2a3e9ac",b=y.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),O=function(e,t){return b.get("weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(w,"&units=metric"))},S=function(e,t){return b.get("forecast?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(w,"&units=metric"))},j=function(e){return b.get("weather?q=".concat(e,"&appid=").concat(w,"&units=metric"))},C={city:null,temp:null,icon:null},F=function(e,t){return function(a){O(e,t).then((function(e){var t,n,r,c;console.log(e),a((t=e.data.name,n=e.data.main.temp,r=e.data.weather[0].icon,c=e.data.weather[0].main,{type:"GET_INFO_FROM_COORDINATES",city:t,temp:n,icon:r,main:c}))}))}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_INFO_FROM_COORDINATES":return Object(v.a)(Object(v.a)({},e),{},{city:t.city,temp:Math.ceil(t.temp),icon:t.icon,main:t.main});default:return e}},k=a(26),x={three_days_forecast:[],isLoading:!0},N=function(e,t,a,n,r){return{type:"GET_FORECAST_INFO",date:e,temp_min:t,temp_max:a,icon:n,details:r}},I=function(e,t){return function(a){S(e,t).then((function(e){var t=new Date,n=e.data.list.filter((function(e){return new Date(e.dt_txt).getDate()===t.getDate()+1}));n.sort((function(e,t){return e.main.temp-t.main.temp})),a(N(n[0].dt_txt,n[0].main.temp,n[7].main.temp,n[0].weather[0].icon,n[0].weather[0].main));var r=e.data.list.filter((function(e){return new Date(e.dt_txt).getDate()===t.getDate()+2}));r.sort((function(e,t){return e.main.temp-t.main.temp})),a(N(r[0].dt_txt,r[0].main.temp,r[7].main.temp,r[0].weather[0].icon,r[0].weather[0].main));var c=e.data.list.filter((function(e){return new Date(e.dt_txt).getDate()===t.getDate()+3}));c.sort((function(e,t){return e.main.temp-t.main.temp})),a(N(c[0].dt_txt,c[0].main.temp,c[7].main.temp,c[0].weather[0].icon,c[0].weather[0].main)),a({type:"SET_PRELOADER",value:!1})}))}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FORECAST_INFO":return Object(v.a)(Object(v.a)({},e),{},{three_days_forecast:[].concat(Object(k.a)(e.three_days_forecast),[{date:t.date,temp_min:Math.ceil(t.temp_min),temp_max:Math.ceil(t.temp_max),icon:t.icon,details:t.details}])});case"SET_PRELOADER":return Object(v.a)(Object(v.a)({},e),{},{isLoading:t.value});default:return e}},D=(a(91),a(29)),M=a(30),A=a(35),G=a(34),L=a(98),P=a(99),W=a(97),U=a(100),B=a(59),H=a.n(B),V={markers:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENT_WEATHER":return Object(v.a)(Object(v.a)({},e),{},{markers:[].concat(Object(k.a)(e.markers),[{icon:t.icon,temp:t.temp,latlng:t.latlng}])});default:return e}},z=function(e){Object(A.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={markers:[[49.823,23.959]]},e.addMarker=function(t){var a=e.state.markers;console.log(a),a.push(t.latlng),console.log(a),e.props.setMarker(t.latlng.lat,t.latlng.lng),e.setState({markers:a})},e}return Object(M.a)(a,[{key:"render",value:function(){return r.a.createElement(L.a,{center:[49.823,23.959],onClick:this.addMarker,zoom:13,className:H.a.leaflet_container},r.a.createElement(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),this.props.markers.map((function(e,t){return r.a.createElement(W.a,{key:t,position:e.latlng},r.a.createElement(U.a,{autoPan:!0},r.a.createElement("img",{style:{width:"50px"},src:"http://openweathermap.org/img/wn/".concat(e.icon,"@2x.png"),alt:"weather"}),r.a.createElement("span",null,e.temp,"\xb0C")))})))}}]),a}(r.a.Component),J=Object(E.b)((function(e){return{markers:e.MapReducer.markers}}),{setMarker:function(e,t){return function(a){O(e,t).then((function(n){var r,c;console.log(n),a((r=n.data.weather[0].icon,c=Math.ceil(n.data.main.temp),{type:"GET_CURRENT_WEATHER",icon:r,temp:c,latlng:{lat:e,lng:t}}))}))}}})(z),q=a(27),Y=a(62),Z=a(60),$=a(42),K=a.n($),Q=function(e){var t=e.name,a=e.country,c=e.temp,o=e.icon,l=e.humidity,i=e.wind_dir,u=e.wind_speed,p=e.favsStorage,f=e.changeStorage;Object(n.useEffect)((function(){console.log(p)}),[p]);return r.a.createElement(d.a,{className:"m-1"},r.a.createElement(m.a,{className:"m-1 d-flex flex-column align-items-end"},r.a.createElement(q.a,{variant:"outline-info",className:"w-25 btn-sm",onClick:function(){return function(e){var t=localStorage.getItem("fav_location");localStorage.setItem("fav_location",t.split(" ").filter((function(t){return t!==e})).join(" ")),f(localStorage.getItem("fav_location"))}(t)}},"X")),r.a.createElement(d.a.Body,null,r.a.createElement(m.a,null,r.a.createElement(s.a,{className:K.a.icon},r.a.createElement(Z.a,{src:"http://openweathermap.org/img/wn/".concat(o,"@2x.png")})),r.a.createElement(s.a,null,r.a.createElement("h4",null,c,"\xb0C")),r.a.createElement(s.a,{className:K.a.name},r.a.createElement("p",null,t),r.a.createElement("p",null,a)))),r.a.createElement(d.a.Footer,null,r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement("p",null," Humidity: ",l,"%")),r.a.createElement(s.a,null,"Wind direction: ",i),r.a.createElement(s.a,null,u," meter/sec"))))},ee={favs:[],favsStorage:""},te=function(e){return{type:"GET_FAV_STORAGE",name_local:e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FAV_PLACE_INFO":return Object(v.a)(Object(v.a)({},e),{},{favs:[].concat(Object(k.a)(e.favs),[{name:t.name,country:t.country,temp:t.temp,icon:t.icon,humidity:t.humidity,wind_dir:t.wind_dir,wind_speed:t.wind_speed}])});case"GET_FAV_STORAGE":return Object(v.a)(Object(v.a)({},e),{},{favsStorage:t.name_local});default:return e}},ne=function(e){Object(A.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={show:!1,input:""},e.handleSubmit=function(t){if(e.props.getFavPlace(t),localStorage.getItem("fav_location")){var a=localStorage.getItem("fav_location").split(" ");a.push(t),localStorage.setItem("fav_location",a.join(" ")),e.props.changeStorage(localStorage.getItem("fav_location"))}else localStorage.setItem("fav_location",t),e.props.changeStorage(localStorage.getItem("fav_location"));console.log(t)},e}return Object(M.a)(a,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("fav_location")&&localStorage.getItem("fav_location").split(" ").map((function(t){return e.props.getFavPlace(t)}))}},{key:"componentDidUpdate",value:function(e,t,a){console.log(e,this.props.favsStorage)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Your Locations"),r.a.createElement(u.a,{className:"m-4"},r.a.createElement(m.a,null,r.a.createElement(s.a,{lg:5},r.a.createElement(q.a,{variant:"info",onClick:function(){return e.setState({show:!e.state.show})}},"Add city")),r.a.createElement(s.a,{lg:4},this.state.show&&r.a.createElement(Y.a.Control,{onChange:function(t){return e.setState({input:t.target.value})},value:this.state.input})),r.a.createElement(s.a,null,this.state.show&&r.a.createElement(q.a,{variant:"info",onClick:function(){return e.handleSubmit(e.state.input)}},"+")))),this.props.favs.map((function(t){return r.a.createElement(Q,{name:t.name,country:t.country,temp:t.temp,icon:t.icon,humidity:t.humidity,wind_dir:t.wind_dir,wind_speed:t.wind_speed,favsStorage:e.props.favsStorage,changeStorage:te})})))}}]),a}(r.a.Component),re=Object(E.b)((function(e){return{favs:e.FavReducer.favs,favsStorage:e.FavReducer.favsStorage}}),{getFavPlace:function(e){return function(t){j(e).then((function(e){var a,n,r,c,o,l,i;console.log(e.data),t((a=e.data.name,n=e.data.sys.country,r=Math.ceil(e.data.main.temp),c=e.data.weather[0].icon,o=e.data.main.humidity,l=function(e){switch(!0){case e>22.5&&e<67.5:return"NE";case e>67.5&&e<112.5:return"E";case e>112.5&&e<157.5:return"SE";case e>157.5&&e<202.5:return"S";case e>202.5&&e<247.5:return"SW";case e>247.5&&e<292.5:return"W";case e>292.5&&e<337.5:return"NW";default:return"N"}}(e.data.wind.deg),i=e.data.wind.speed,{type:"GET_FAV_PLACE_INFO",name:a,country:n,temp:r,icon:c,humidity:o,wind_dir:l,wind_speed:i}))}))}},changeStorage:te})(ne),ce=a(24),oe=Object(E.b)((function(e){return{city:e.CurrentReducer.city,temp:e.CurrentReducer.temp,icon:e.CurrentReducer.icon,main:e.CurrentReducer.main}}),{getInfoFromCoordinates:F,getForecastInfo:I})((function(e){var t=e.city,a=e.temp,c=e.main,o=e.icon,l=e.getInfoFromCoordinates;return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){l(e.coords.latitude,e.coords.longitude)}))}),[]),r.a.createElement(u.a,{className:i.a.background},r.a.createElement(m.a,null,r.a.createElement(s.a,{lg:1,className:"d-flex flex-column justify-content-start"},r.a.createElement("div",null,r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(o,"@2x.png"),alt:"weather-icon"}))),r.a.createElement(s.a,{lg:2,className:"d-flex flex-column justify-content-center align-items-start"},r.a.createElement("h3",null,t),r.a.createElement("h4",null,a,"\xb0C"),r.a.createElement("h4",null,c))),r.a.createElement(m.a,null,r.a.createElement(ce.b,{to:"/details"},"details...")))})),le=Object(E.b)((function(e){return{city:e.CurrentReducer.city,temp:e.CurrentReducer.temp,icon:e.CurrentReducer.icon,main:e.CurrentReducer.main}}),{getInfoFromCoordinates:F,getForecastInfo:I})((function(e){return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords.latitude,t.coords.longitude),e.getForecastInfo(t.coords.latitude,t.coords.longitude)}))})),r.a.createElement(u.a,{className:"m-4"},r.a.createElement(m.a,null,r.a.createElement(s.a,null)),r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement(_,null)),r.a.createElement(s.a,null,r.a.createElement(J,null)),r.a.createElement(s.a,null,r.a.createElement(re,null))))})),ie=a(9),ue=function(){return r.a.createElement("div",null,"details")};var me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(ie.a,{exact:!0,path:"/home",render:function(){return r.a.createElement(le,null)}}),r.a.createElement(ie.a,{path:"/details",render:function(){return r.a.createElement(ue,null)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(94);var se=a(22),de=a(61),pe=Object(se.c)({CurrentReducer:R,ForecastReducer:T,FavReducer:ae,MapReducer:X}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.d,ge=Object(se.e)(pe,fe(Object(se.a)(de.a)));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce.a,null,r.a.createElement(E.a,{store:ge},r.a.createElement(me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.f8aab5e5.chunk.js.map